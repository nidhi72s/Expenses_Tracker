{% extends "base.html" %}
{% block content %}
<h2>Expenses</h2>

<form action="/add" method="POST">
    <label>Category:</label>
    <input type="text" name="category" required>
    <label>Amount:</label>
    <input type="number" name="amount" step="0.01" required>
    <label>Comment:</label>
    <input type="text" name="comment">
    <button type="submit">Add</button>
</form>

<h3>Expense List</h3>
<table>
    <tr>
        <th>Category</th>
        <th>Amount</th>
        <th>Comment</th>
        <th>Created At</th>
        <th>Actions</th>
    </tr>
    {% for expense in expenses %}
    <tr>
        {% if edit_mode and expense.id == edit_id %}
        <form action="/edit/{{ expense.id }}" method="POST">
            <td><input type="text" name="category" value="{{ expense.category }}"></td>
            <td><input type="number" name="amount" value="{{ expense.amount }}" step="0.01"></td>
            <td><input type="text" name="comment" value="{{ expense.comment }}"></td>
            <td>{{ expense.created_at }}</td>
            <td>
                <button type="submit" class="edit-btn">Save</button>
                <a href="/expenses" class="delete-btn">Cancel</a>
            </td>
        </form>
        {% else %}
        <td>{{ expense.category }}</td>
        <td>{{ expense.amount }}</td>
        <td>{{ expense.comment }}</td>
        <td>{{ expense.created_at }}</td>
        <td>
            <form action="/edit/{{ expense.id }}" method="GET" style="display:inline;">
                <button type="submit" class="edit-btn">Edit</button>
            </form>
            <form action="/delete/{{ expense.id }}" method="GET" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete?');">
                <button type="submit" class="delete-btn">Delete</button>
            </form>
        </td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
{% endblock %}
